import React, { useState, useEffect} from 'react';

const Browse = () => {
    const [isLoading, setIsLoading] = useState<boolean>(true);
    const [data,setData] = useState<any>();
    const from_date = new Date(2021,7,5);
    const to_date = new Date(2021,7,8);
    
    const Skeyword = async () => {
        setIsLoading(true);
        var fd = from_date.toString();
        var td = to_date.toString();

          fetch('http://localhost:3006/api/filter/date',{
            method: 'GET',
            headers: {
                'Content-Type':'application/x-www-form-urlencoded',
            },
            body: new URLSearchParams({
               "from_date": fd,
                "to_date": td
            })
        }).then(function(response){
            console.log(response)
            return response.json();
          }).then(function(myJson) {
            console.log(myJson);
            setData(myJson)
          }).finally(() => {
            setIsLoading(false);
          });

    }

        let load;
        if (isLoading || data.statusCode === 404) 
        {
            load = (
            <div className="spinner-border" role="status">
            <span className="visually-hidden">Loading...</span>
            </div>);
        }
        else
        { 
            load = (
            <div>
            <h2>Questions</h2>
            <br></br>
            {data.answers.map((object, index) => (
            <div className={["rounded","p-3 mb-2 bg-dark text-white"].join(" ")} id={index}>
            <h5>{object.title}</h5>
            <div className={["rounded","p-3 mb-2 bg-secondary text-white"].join(" ")}><p>{object.question_text}</p></div>
            </div>
             ))}
            </div>
        );
        }

        return(
            <div>
                
            {load}
            </div>
        );
};

export default Browse;
